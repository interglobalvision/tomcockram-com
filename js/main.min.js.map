{"version":3,"sources":["main.js"],"names":["l","data","console","log","windowHeight","$","window","height","animationSpeed","slideMargin","parseInt","css","headerTop","offset","top","headerHeight","outerHeight","sliderHeight","Ajaxy","init","_this","this","click","event","preventDefault","url","currentTarget","href","ajaxLoad","onpopstate","document","location","origin","pathname","ajax","beforeSend","ajaxBefore","dataType","error","jqXHR","textStatus","errorThrown","ajaxErrorHandler","success","ajaxSuccess","title","innerText","content","find","header","history","pushState","html","siteInit","cycle","singleProject","openSlideshow","slide","hasClass","delay","addClass","setTimeout","hide","removeClass","closeSlideshow","show","masonry","jQuery","ready","length","on","scrollTop","hideSplash","animate","remove","e","target","toLowerCase","imagesLoaded","itemSelector","columnWidth","gutter","transitionDuration","opacity","keydown","which","index","bind","fadeOut","unbind"],"mappings":"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","file":"main.min.js","sourcesContent":["/* jshint browser: true, devel: true, indent: 2, curly: true, eqeqeq: true, futurehostile: true, latedef: true, undef: true, unused: true */\n/* global $, jQuery, document */\n\nfunction l(data) {\n  'use strict';\n  console.log(data);\n}\n\nvar\n  windowHeight = $(window).height(),\n  animationSpeed = 700,\n  slideMargin = parseInt( $('#header').css('padding-top'), 10 ),\n  headerTop = $('#header').offset().top,\n  headerHeight = $('#header').outerHeight(),\n  sliderHeight = windowHeight - headerHeight - slideMargin;\n\n// AJAX\nAjaxy = {\n  init: function() {\n    var _this = this;\n\n    $('.ajax-link').click( function(event) {\n      event.preventDefault();\n\n      var url = event.currentTarget.href;\n\n      _this.ajaxLoad(url);\n\n    });\n\n    // For back button\n    window.onpopstate = function(event) {\n      _this.ajaxLoad(document.location.origin + document.location.pathname);\n    };\n  },\n\n  ajaxLoad: function(url) {\n    var _this = this;\n\n    $.ajax(url, {\n      beforeSend: function() {\n        _this.ajaxBefore();\n      },\n\n      dataType: 'html',\n      error: function(jqXHR, textStatus, errorThrown) {\n        _this.ajaxErrorHandler(jqXHR, textStatus, errorThrown);\n      },\n\n      success: function(data) {\n        _this.ajaxSuccess(data, url);\n      },\n    });\n  },\n\n  ajaxBefore: function() {\n  },\n\n  ajaxErrorHandler: function(jqXHR, textStatus, errorThrown) {\n  },\n\n  ajaxSuccess: function(data,url) { \n    var title = $(data)[5].innerText;\n    var content = $(data).find('#main-content');\n    var header = $(data).find('#header');\n\n    history.pushState(null, title, url);\n    document.title = title;\n\n    $('#main-content').html(content.html());\n    $('#header').html(header.html());\n\n    siteInit();\n  },\n};\n\n/*\n * siteInit()\n * \n * This function wraps everything that needs to run on each load; onload or after ajax load\n */\nsiteInit = function() {\n  \n  Ajaxy.init();\n\n  $('.cycle-slideshow').cycle();\n  var singleProject = {\n    openSlideshow: function(slide) {\n      if ($('.slider-content').hasClass('slider-hidden')) {\n        var delay;\n\n        $('.cycle-slideshow').cycle('goto', slide);\n        $('.masonry-content').addClass('masonry-hidden');\n        $('#single-vimeo-embed').addClass('vimeo-hidden');\n\n        delay = setTimeout(function() {\n          $('.masonry-content').hide();\n          $('.slider-content').removeClass('slider-hidden');\n          $('#close-slider').removeClass('u-hidden');\n          $('#close-single').addClass('u-hidden');\n        }, animationSpeed);\n      }\n    },\n\n    closeSlideshow: function() {\n      var delay;\n\n      $('.slider-content').addClass('slider-hidden');\n\n      delay = setTimeout(function() {\n        $('.masonry-content').show();\n        $('.js-masonry-container').masonry();\n        $('#single-vimeo-embed').removeClass('vimeo-hidden');\n        $('.masonry-content').removeClass('masonry-hidden');\n        $('.slider-content').addClass('slider-hidden');\n        $('#close-slider').addClass('u-hidden');\n        $('#close-single').removeClass('u-hidden');\n      }, animationSpeed);\n    },\n  };\n\n  jQuery(document).ready(function () {\n    'use strict';\n\n    // AJAXY\n    Ajaxy.init();\n\n    // SPLASH\n    if ($('#splash').length) {\n\n      $('#splash').height(windowHeight);\n\n      $('#main-container').removeClass('u-hidden').css('min-height', windowHeight);\n\n      $(window).on('scroll', function() {\n        if ($(window).scrollTop() >= $('#main-container').offset().top && $('#splash').length) {\n          hideSplash();\n        }\n      });\n\n      $('#splash').on('click', function() {\n        $('html, body').animate({scrollTop: $('#main-container').offset().top,}, animationSpeed);\n      });\n\n      var hideSplash = function() {\n        $('#splash').remove();\n        $('.splash-margin').css('margin-top', 0);\n        $(window).scrollTop(0);\n      };\n    }\n\n    // MENU FILTERS\n\n    $('.js-menu-filter').on({\n      click: function(e) {\n        e.preventDefault();\n        var target = $(this).data('target').toLowerCase();\n\n        if (target === 'all') {\n          $('.post').show();\n          $('.js-masonry-container').masonry();\n        } else {\n          $('.post').hide();\n          $('.category-' + target).show();\n          $('.js-masonry-container').masonry();\n        }\n\n      },\n    });\n\n    // MASONRY\n    if ( $('.js-masonry-container').length ) {\n      $('.js-masonry-container').imagesLoaded( function() {\n        $('.js-masonry-container').masonry({\n          itemSelector: '.js-masonry-item',\n          columnWidth: 1,\n          gutter: 0,\n          transitionDuration: '0s',\n        }).css({\n          'opacity': 1,\n        });\n        if ( $('.feed-item-title').length ) {\n          $('.feed-item-title').css('visibility', 'visible');\n        }\n      });\n    }\n\n    //SLIDER\n    if ( $('.slider-content').length ) {\n      $('.slider-item').css('height', sliderHeight );\n\n      $(document).keydown( function(e) {\n        switch(e.which) {\n          case 37: { // left\n            $('.cycle-slideshow').cycle('prev');\n            break;\n          }\n\n          case 39: { // right\n            $('.cycle-slideshow').cycle('next');\n            break;\n          }\n\n          case 27: {// escape\n            singleProject.closeSlideshow();\n            break;\n          }\n\n          default: {\n            return; // exit this handler for other keys\n          }\n        }\n\n      });\n    }\n\n    $('.js-single-masonry-item').on({\n      click: function() {\n        var index = $(this).data('index');\n\n        singleProject.openSlideshow(index);\n      },\n    });\n\n    $('#close-slider').on({\n      click: function() {\n        singleProject.closeSlideshow();\n      },\n    });\n\n    // STICK HEADER\n    $('#main-container').css('padding-top', headerHeight);\n\n    if ($('#splash').length) {\n      $(window).bind('scroll', function() {\n\n        if ($(window).scrollTop() > 0) {\n          $('#splash-title').fadeOut(animationSpeed);\n        }\n\n        if ($('#splash').length) {\n          headerTop = $('#header').offset().top;\n        } else {\n          headerTop = 0;\n        }\n\n        if (!$('#header').hasClass('u-fixed') && $(window).scrollTop() > headerTop) {\n          $('#header').addClass('u-fixed');\n          $(window).unbind('scroll');\n        }\n      });\n    } else {\n      $('#header').addClass('u-fixed');\n    }\n\n    // RESIZE\n    $(window).on('resize', function() {\n      windowHeight = $(window).height();\n      headerHeight = $('#header').outerHeight();\n      slideMargin = parseInt( $('#header').css('padding-top'), 10 );\n      sliderHeight = windowHeight - headerHeight - slideMargin;\n\n      $('#main-container').css('min-height', windowHeight);\n\n      if ($('#splash').length) {\n        $('#splash').height(windowHeight);\n      }\n\n      if ( $('.slider-content').length ) {\n        $('.slider-item').css('height', sliderHeight );\n      }\n    });\n\n  });\n};\n\nsiteInit();\n"],"sourceRoot":"/source/"}