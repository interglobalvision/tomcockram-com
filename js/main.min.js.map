{"version":3,"sources":["main.js"],"names":["l","data","console","log","siteInit","Ajaxy","windowHeight","$","window","height","windowWidth","width","animationSpeed","slideMargin","parseInt","css","headerTop","offset","top","headerHeight","outerHeight","sliderHeight","$older","loadingNext","init","cycle","singleProject","openSlideshow","slide","_this","this","hasClass","delay","addClass","lazyloadSlideshow","setTimeout","hide","removeClass","closeSlideshow","show","masonry","imagesLoaded","each","$this","src","attr","jQuery","document","ready","length","splashTimeout","animate","scrollTop","on","hideSplash","disablescroll","handleScrollbar","remove","clearTimeout","itemSelector","columnWidth","gutter","transitionDuration","opacity","mouseenter","play","mouseleave","pause","keydown","e","which","swipe","swipeLeft","swipeRight","click","index","bind","fadeOut","unbind","url","ajax","beforeSend","fadeIn","dataType","error","jqXHR","textStatus","success","respHtml","createElement","innerHTML","$bodyClasses","$items","$pagination","removeAttr","append","itemsCount","load","replaceWith","html","complete","ajaxyLinks","event","preventDefault","currentTarget","href","ajaxLoad","onpopstate","location","origin","pathname","ajaxBefore","ajaxErrorHandler","ajaxSuccess","alert","$title","text","$header","$content","history","pushState","title"],"mappings":"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","file":"main.min.js","sourcesContent":["/* jshint browser: true, devel: true, indent: 2, curly: true, eqeqeq: true, futurehostile: true, latedef: true, undef: true, unused: true */\n/* global $, jQuery, document */\n\nfunction l(data) {\n  'use strict';\n  console.log(data);\n}\n\nvar\n  siteInit,\n  Ajaxy,\n  windowHeight = $(window).height(),\n  windowWidth = $(window).width(),\n  animationSpeed = 700,\n  slideMargin = parseInt( $('#header').css('padding-top'), 10 ),\n  headerTop = $('#header').offset().top,\n  headerHeight = $('#header').outerHeight(),\n  sliderHeight = windowHeight - headerHeight - slideMargin,\n  $older = null,\n  loadingNext = false;\n\n/*\n * siteInit()\n *\n * This function wraps everything that needs to run on each load; onload or after ajax load\n */\nsiteInit = function() {\n\n  // AJAXY\n  Ajaxy.init();\n\n  $('.cycle-slideshow').cycle();\n  var singleProject = {\n    openSlideshow: function(slide) {\n      var _this = this;\n\n      if ($('.slider-content').hasClass('slider-hidden')) {\n        var delay;\n\n        $('.cycle-slideshow').cycle('goto', slide);\n        $('.masonry-content').addClass('masonry-hidden');\n        $('#single-vimeo-embed').addClass('vimeo-hidden');\n        _this.lazyloadSlideshow();\n\n        delay = setTimeout(function() {\n          $('.masonry-content').hide();\n          $('.slider-content').removeClass('slider-hidden');\n          $('#close-slider').removeClass('u-hidden');\n          $('#close-single').addClass('u-hidden');\n        }, animationSpeed);\n      }\n    },\n\n    closeSlideshow: function() {\n      var delay;\n\n      $('.slider-content').addClass('slider-hidden');\n\n      delay = setTimeout(function() {\n        $('.masonry-content').show();\n        $('.js-masonry-container').masonry();\n        $('#single-vimeo-embed').removeClass('vimeo-hidden');\n        $('.masonry-content').removeClass('masonry-hidden');\n        $('.slider-content').addClass('slider-hidden');\n        $('#close-slider').addClass('u-hidden');\n        $('#close-single').removeClass('u-hidden');\n      }, animationSpeed);\n    },\n\n    lazyloadSlideshow: function() {\n      $('.cycle-slideshow').imagesLoaded( function() {\n        $('.js-lazyload-slideshow').each(function() {\n          var $this = $(this),\n            src = $this.data('src');\n\n          $this.attr('src', src);\n        });\n      });\n    },\n  };\n\n  jQuery(document).ready(function () {\n    'use strict';\n\n    // SPLASH\n    if ($('#splash').length) {\n\n      var splashTimeout = setTimeout(function() {\n        $('html, body').animate({\n            scrollTop: $('#main-container').offset().top,\n        }, animationSpeed);\n      }, 3000);\n\n      $('#splash').height(windowHeight);\n\n      $('#main-container').removeClass('u-hidden').css('min-height', windowHeight);\n\n      $(window).on('scroll', function() {\n        if ($(window).scrollTop() >= $('#main-container').offset().top && $('#splash').length) {\n          hideSplash();\n        }\n      });\n\n      $('#splash').on('click', function() {\n        $(window).disablescroll({\n          handleScrollbar: false,\n        });\n        setTimeout(function() {\n          $(window).disablescroll('undo');\n        }, animationSpeed);\n\n        $('html, body').animate({scrollTop: $('#main-container').offset().top,}, animationSpeed);\n      });\n\n      var hideSplash = function() {\n        $('#splash').remove();\n        $('.splash-margin').css('margin-top', 0);\n        $(window).scrollTop(0);\n        clearTimeout(splashTimeout);\n      };\n    }\n\n    // MASONRY\n    if ( $('.js-masonry-container').length ) {\n      $('.js-masonry-container').imagesLoaded( function() {\n        $('.js-masonry-container').masonry({\n          itemSelector: '.js-masonry-item',\n          columnWidth: 1,\n          gutter: 0,\n          transitionDuration: '0s',\n        }).css({\n          'opacity': 1,\n        });\n        if ( $('.feed-item-title').length ) {\n          $('.feed-item-title').css('visibility', 'visible');\n        }\n      });\n    }\n\n    if ($('video').length) {\n      $('video').on({\n        'mouseenter': function() {\n          this.play();\n        },\n\n        'mouseleave': function() {\n          this.pause();\n        },\n      });\n    }\n\n    //SLIDER\n    if ( $('.slider-content').length ) {\n      $('.slider-item').css('height', sliderHeight );\n      $('.slider-img').css('max-height', sliderHeight );\n\n      $(document).keydown( function(e) {\n        console.log('keydown:', e.which);\n        switch(e.which) {\n          case 37: { // left\n            $('.cycle-slideshow').cycle('prev');\n            break;\n          }\n\n          case 39: { // right\n            $('.cycle-slideshow').cycle('next');\n            break;\n          }\n\n          case 27: {// escape\n            singleProject.closeSlideshow();\n            break;\n          }\n\n          default: {\n            return; // exit this handler for other keys\n          }\n        }\n      });\n\n      $('.slider-wrapper').swipe({\n        swipeLeft: function() {\n          $('.cycle-slideshow').cycle('next');\n        },\n        swipeRight: function() {\n          $('.cycle-slideshow').cycle('prev');\n        },\n      });\n    }\n\n    $('.js-single-masonry-item').on({\n      click: function() {\n        if (windowWidth > 468) {\n          var index = $(this).data('index');\n\n          singleProject.openSlideshow(index);\n        }\n      },\n    });\n\n    $('#close-slider').on({\n      click: function() {\n        singleProject.closeSlideshow();\n      },\n    });\n\n    // STICK HEADER\n    $('#main-container').css('padding-top', headerHeight);\n\n    if ($('#splash').length) {\n      $(window).bind('scroll.stickyHeader', function() {\n\n        if ($(window).scrollTop() > 0) {\n          $('#splash-title').fadeOut(animationSpeed);\n        }\n\n        if ($('#splash').length) {\n          headerTop = $('#header').offset().top;\n        } else {\n          headerTop = 0;\n        }\n\n        if (!$('#header').hasClass('u-fixed') && $(window).scrollTop() > headerTop) {\n          $('#header').addClass('u-fixed');\n          $(window).unbind('.stickyHeader');\n        }\n      });\n    } else {\n      $('#header').addClass('u-fixed');\n    }\n\n    // INFINITE SCROLL\n    $older = $('#pagination a:contains(\"Older\")');\n    if( $('body').hasClass('home') || $('body').hasClass('archive') ) {\n\n      $(window).on('scroll', function() {\n\n        // If reach bottom of document\n        if ($(window).scrollTop() === ($(document).height() - $(window).height() ) && loadingNext === false) {\n\n         // If 'Older' pagination exist\n          if( $older.length !== 0 ) {\n\n            var url = $older.attr('href');\n\n            $.ajax(url, {\n              beforeSend: function() {\n                // Hide pagination\n                $('#pagination').fadeOut('50');\n\n                // Show loading\n                $('.loading-more').fadeIn('100');\n\n              },\n\n              dataType: 'html',\n              error: function(jqXHR, textStatus) {\n                loadingNext = false;\n                console.error(textStatus);\n              },\n\n              success: function(data) {\n\n                // Convert data into proper html to be able to fully parse thru jQuery\n                var respHtml = document.createElement('html');\n\n                respHtml.innerHTML = data;\n\n                // Get changes: body classes, page title, main content, header\n                var $bodyClasses = $('body', respHtml).attr('class');\n                var $items = $('.feed-item', respHtml);\n                var $pagination = $('#pagination', respHtml);\n\n                // Update with new content and classes\n                $('body').removeAttr('class').addClass($bodyClasses);\n\n                // Set new item's opacity to 0\n                $items.css({opacity: 0,});\n\n                // Append new items\n                $('#feed-container').append($items);\n\n                // Run masonry after all images have loaded\n                var itemsCount = 0;\n\n                $('#feed-container img').load(function() {\n                  itemsCount++;\n                  if( itemsCount === $items.length ) {\n                    $items.css({opacity: 1,});\n                    $('#feed-container').masonry('appended', $items);\n                  }\n                });\n\n                // Update pagination\n                if( $('#pagination a:contains(\"Older\")', respHtml).length ) {\n                  $('#pagination').replaceWith($pagination);\n                } else {\n                  // Hide pagination on last paage\n                  $('#pagination').html('');\n                }\n\n                $older = $('#pagination a:contains(\"Older\")');\n                loadingNext = false;\n              },\n\n              complete: function() {\n                // Hide pagination\n                $('#pagination').fadeIn('100');\n\n                // Show loading\n                $('.loading-more').fadeOut('50');\n              },\n            });\n            loadingNext = true;\n          }\n        }\n      });\n    }\n\n    // RESIZE\n    $(window).on('resize', function() {\n      windowHeight = $(window).height();\n      windowWidth = $(window).width();\n      headerHeight = $('#header').outerHeight();\n      slideMargin = parseInt( $('#header').css('padding-top'), 10 );\n      sliderHeight = windowHeight - headerHeight - slideMargin;\n\n      $('#main-container').css('min-height', windowHeight);\n\n      if ($('#splash').length) {\n        $('#splash').height(windowHeight);\n      }\n\n      if ( $('.slider-content').length ) {\n        $('.slider-item').css('height', sliderHeight );\n        $('.slider-img').css('max-height', sliderHeight );\n      }\n    });\n\n  });\n};\n\n// AJAX\nAjaxy = {\n  init: function() {\n    var _this = this;\n    var ajaxyLinks = 'a.ajax-link';\n\n    if( $('body').hasClass('page') || $('body').hasClass('blog') || $('body').hasClass('category') ) {\n      ajaxyLinks += ', .js-menu-filter, #pagination a';\n    }\n\n    // Find all ajaxy links and bind ajax event\n    $(ajaxyLinks).click( function(event) {\n      event.preventDefault();\n\n      var url = event.currentTarget.href;\n\n      $('#loading').addClass('on');\n      $('#main-content').addClass('main-content-hidden');\n      $('#header').addClass('header-hidden');\n      $(\"html, body\").animate({scrollTop: 0,}, animationSpeed);\n      _this.ajaxLoad(url);\n\n    });\n\n    // For back button\n    window.onpopstate = function() {\n      _this.ajaxLoad(document.location.origin + document.location.pathname);\n    };\n  },\n\n  ajaxLoad: function(url) {\n    var _this = this;\n\n    $.ajax(url, {\n      beforeSend: function() {\n        _this.ajaxBefore();\n      },\n\n      dataType: 'html',\n      error: function(jqXHR, textStatus) {\n        _this.ajaxErrorHandler(jqXHR, textStatus);\n      },\n\n      success: function(data) {\n        _this.ajaxSuccess(data, url);\n        setTimeout( function() {\n          $('#main-content').removeClass('main-content-hidden');\n          $('#header').removeClass('header-hidden');\n          $('#loading').removeClass('on');\n        }, animationSpeed);\n      },\n    });\n  },\n\n  ajaxBefore: function() {\n  },\n\n  ajaxErrorHandler: function(jqXHR, textStatus) {\n    alert(textStatus);\n    l(jqXHR);\n  },\n\n  ajaxSuccess: function(data,url) {\n\n    // Convert data into proper html to be able to fully parse thru jQuery\n    var respHtml = document.createElement('html');\n\n    respHtml.innerHTML = data;\n\n    // Unbind events\n    $(window).unbind('resize');\n    $(window).unbind('scroll');\n    $(document).unbind('keydown');\n    $('#splash').unbind('click');\n\n    // Get changes: body classes, page title, main content, header\n    var $bodyClasses = $('body', respHtml).attr('class');\n    var $title = $('title', respHtml).text();\n    var $header = $('#header', data);\n    var $content = $('#main-content', respHtml);\n\n    // Push new history state and update title\n    history.pushState(null, $title, url);\n    document.title = $title;\n\n    // Update with new content and classes\n    $('body').removeAttr('class').addClass($bodyClasses);\n    $('#main-content').html($content.html());\n    $('#header').html($header.html());\n\n    // Rebind initial JS\n    siteInit();\n  },\n};\n\nsiteInit();\n"],"sourceRoot":"/source/"}