function l(e){"use strict";console.log(e)}var siteInit,Ajaxy,windowHeight=$(window).height(),windowWidth=$(window).width(),animationSpeed=700,slideMargin=parseInt($("#header").css("padding-top"),10),headerTop=$("#header").offset().top,headerHeight=$("#header").outerHeight(),sliderHeight=windowHeight-headerHeight-slideMargin,$older=null,loadingNext=!1;siteInit=function(){Ajaxy.init(),$(".cycle-slideshow").cycle();var e={openSlideshow:function(e){var n=this;if($(".slider-content").hasClass("slider-hidden")){var i;$(".cycle-slideshow").cycle("goto",e),$(".masonry-content").addClass("masonry-hidden"),$("#single-vimeo-embed").addClass("vimeo-hidden"),n.lazyloadSlideshow(),i=setTimeout(function(){$(".masonry-content").hide(),$(".slider-content").removeClass("slider-hidden"),$("#close-slider").removeClass("u-hidden"),$("#close-single").addClass("u-hidden")},animationSpeed)}},closeSlideshow:function(){var e;$(".slider-content").addClass("slider-hidden"),e=setTimeout(function(){$(".masonry-content").show(),$(".js-masonry-container").masonry(),$("#single-vimeo-embed").removeClass("vimeo-hidden"),$(".masonry-content").removeClass("masonry-hidden"),$(".slider-content").addClass("slider-hidden"),$("#close-slider").addClass("u-hidden"),$("#close-single").removeClass("u-hidden")},animationSpeed)},lazyloadSlideshow:function(){$(".cycle-slideshow").imagesLoaded(function(){$(".js-lazyload-slideshow").each(function(){var e=$(this),n=e.data("src");e.attr("src",n)})})}};jQuery(document).ready(function(){"use strict";if($("#splash").length){var n=setTimeout(function(){$("html, body").animate({scrollTop:$("#main-container").offset().top},animationSpeed)},3e3);$("#splash").height(windowHeight),$("#main-container").removeClass("u-hidden").css("min-height",windowHeight),$(window).on("scroll",function(){$(window).scrollTop()>=$("#main-container").offset().top&&$("#splash").length&&i()}),$("#splash").on("click",function(){$(window).disablescroll({handleScrollbar:!1}),setTimeout(function(){$(window).disablescroll("undo")},animationSpeed),$("html, body").animate({scrollTop:$("#main-container").offset().top},animationSpeed)});var i=function(){$("#splash").remove(),$(".splash-margin").css("margin-top",0),$(window).scrollTop(0),clearTimeout(n)}}$(".js-masonry-container").length&&$(".js-masonry-container").imagesLoaded(function(){$(".js-masonry-container").masonry({itemSelector:".js-masonry-item",columnWidth:1,gutter:0,transitionDuration:"0s"}).css({opacity:1}),$(".feed-item-title").length&&$(".feed-item-title").css("visibility","visible")}),$("video").length&&$("video").on({mouseenter:function(){this.play()},mouseleave:function(){this.pause()}}),$(".slider-content").length&&($(".slider-item").css("height",sliderHeight),$(".slider-img").css("max-height",sliderHeight),$(document).keydown(function(n){switch(n.which){case 37:$(".cycle-slideshow").cycle("prev");break;case 39:$(".cycle-slideshow").cycle("next");break;case 27:e.closeSlideshow();break;default:return}})),$(".js-single-masonry-item").on({click:function(){if(windowWidth>468){var n=$(this).data("index");e.openSlideshow(n)}}}),$("#close-slider").on({click:function(){e.closeSlideshow()}}),$("#main-container").css("padding-top",headerHeight),$("#splash").length?$(window).bind("scroll.stickyHeader",function(){$(window).scrollTop()>0&&$("#splash-title").fadeOut(animationSpeed),headerTop=$("#splash").length?$("#header").offset().top:0,!$("#header").hasClass("u-fixed")&&$(window).scrollTop()>headerTop&&($("#header").addClass("u-fixed"),$(window).unbind(".stickyHeader"))}):$("#header").addClass("u-fixed"),$older=$('#pagination a:contains("Older")'),($("body").hasClass("home")||$("body").hasClass("archive"))&&$(window).on("scroll",function(){if($(window).scrollTop()===$(document).height()-$(window).height()&&loadingNext===!1&&0!==$older.length){var e=$older.attr("href");$.ajax(e,{beforeSend:function(){$("#pagination").fadeOut("50"),$(".loading-more").fadeIn("100")},dataType:"html",error:function(e,n){loadingNext=!1,console.error(n)},success:function(e){var n=document.createElement("html");n.innerHTML=e;var i=$("body",n).attr("class"),a=$(".feed-item",n),o=$("#pagination",n);$("body").removeAttr("class").addClass(i),a.css({opacity:0}),$("#feed-container").append(a);var t=0;$("#feed-container img").load(function(){t++,t===a.length&&(a.css({opacity:1}),$("#feed-container").masonry("appended",a))}),$('#pagination a:contains("Older")',n).length?$("#pagination").replaceWith(o):$("#pagination").html(""),$older=$('#pagination a:contains("Older")'),loadingNext=!1},complete:function(){$("#pagination").fadeIn("100"),$(".loading-more").fadeOut("50")}}),loadingNext=!0}}),$(window).on("resize",function(){windowHeight=$(window).height(),windowWidth=$(window).width(),headerHeight=$("#header").outerHeight(),slideMargin=parseInt($("#header").css("padding-top"),10),sliderHeight=windowHeight-headerHeight-slideMargin,$("#main-container").css("min-height",windowHeight),$("#splash").length&&$("#splash").height(windowHeight),$(".slider-content").length&&($(".slider-item").css("height",sliderHeight),$(".slider-img").css("max-height",sliderHeight))})})},Ajaxy={init:function(){var e=this,n="a.ajax-link";($("body").hasClass("page")||$("body").hasClass("blog")||$("body").hasClass("category"))&&(n+=", .js-menu-filter, #pagination a"),$(n).click(function(n){n.preventDefault();var i=n.currentTarget.href;$("#loading").addClass("on"),$("#main-content").addClass("main-content-hidden"),$("#header").addClass("header-hidden"),e.ajaxLoad(i)}),window.onpopstate=function(){e.ajaxLoad(document.location.origin+document.location.pathname)}},ajaxLoad:function(e){var n=this;$.ajax(e,{beforeSend:function(){n.ajaxBefore()},dataType:"html",error:function(e,i){n.ajaxErrorHandler(e,i)},success:function(i){n.ajaxSuccess(i,e),setTimeout(function(){$("#main-content").removeClass("main-content-hidden"),$("#header").removeClass("header-hidden"),$("#loading").removeClass("on")},animationSpeed)}})},ajaxBefore:function(){},ajaxErrorHandler:function(e,n){alert(n),l(e)},ajaxSuccess:function(e,n){var i=document.createElement("html");i.innerHTML=e;var a=$("body",i).attr("class"),o=$("title",i).text(),t=$("#header",e),s=$("#main-content",i);history.pushState(null,o,n),document.title=o,$("body").removeAttr("class").addClass(a),$("#main-content").html(s.html()),$("#header").html(t.html()),siteInit()}},siteInit();
//# sourceMappingURL=/main.min.js.map